/**
 * Framework-Agnostic Theme System
 * Entry point for the CSS-first design system
 * Works with or without Tailwind CSS
 */

/* Import design tokens first */
@import './design-tokens.css';

/* Import CSS layers in order */
@import './base.css';
@import './components.css';
@import './utilities.css';

/**
 * Theme System Configuration
 * Allows runtime theme switching and customization
 */

/* Default theme is already defined in design-tokens.css */

/*
 * Alternative theme variants can be defined here
 * Example: High contrast theme
 */
.theme-high-contrast {
  --color-bg: #000000;
  --color-bg-secondary: #1a1a1a;
  --color-text: #ffffff;
  --color-text-secondary: #cccccc;
  --color-border: #ffffff;
  --color-primary-400: #ffff00;
  --color-accent-400: #ff6600;
  --shadow-card: 0 4px 6px -1px rgba(255, 255, 255, 0.1);
}

/*
 * Game-specific theme overrides
 * Each game can override specific tokens while maintaining consistency
 */
.theme-memory-cards {
  --card-aspect-ratio: 1;
  --card-size-md: 90px;
  --color-primary-400: #4ade80; /* Green for memory games */
}

.theme-tic-tac-toe {
  --color-primary-400: #60a5fa; /* Blue for strategy games */
  --color-accent-400: #f87171;  /* Red for opponent */
}

.theme-number-touch {
  --color-primary-400: #a78bfa; /* Purple for number games */
  --card-aspect-ratio: 1;
}

.theme-color-mixer {
  --color-primary-400: #fb7185; /* Pink for creative games */
  --radius-2xl: 2rem; /* More rounded for artistic feel */
}

/*
 * Accessibility theme overrides
 */
@media (prefers-contrast: high) {
  :root {
    --color-border: var(--color-neutral-900);
    --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-button: 0 2px 4px -1px rgba(0, 0, 0, 0.4);
    --shadow-hover: 0 8px 16px -4px rgba(0, 0, 0, 0.4);
  }
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --duration-fast: 0ms;
    --duration-normal: 0ms;
    --duration-slow: 0ms;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/*
 * Mobile-specific optimizations
 */
@media (max-width: 768px) {
  :root {
    /* Larger touch targets on mobile */
    --touch-target-min: 48px;
    --touch-target-comfortable: 52px;

    /* Slightly larger cards for better touch interaction */
    --card-size-sm: 70px;
    --card-size-md: 90px;
    --card-size-lg: 110px;

    /* More generous spacing on mobile */
    --space-md: 1.25rem;
    --space-lg: 2rem;
  }
}

/*
 * Large screen optimizations
 */
@media (min-width: 1024px) {
  :root {
    /* Larger cards for desktop */
    --card-size-md: 100px;
    --card-size-lg: 120px;
    --card-size-xl: 140px;

    /* More subtle hover effects on desktop */
    --feedback-scale-hover: 1.03;
  }
}

/*
 * CSS-only theme switching utility
 * Allows themes to be switched without JavaScript
 */
:root:has(#theme-high-contrast:checked) {
  --color-bg: #000000;
  --color-bg-secondary: #1a1a1a;
  --color-text: #ffffff;
  --color-text-secondary: #cccccc;
  --color-border: #ffffff;
  --color-primary-400: #ffff00;
  --color-accent-400: #ff6600;
}

/*
 * Print styles for documentation and game instructions
 */
@media print {
  :root {
    --color-bg: #ffffff;
    --color-text: #000000;
    --shadow-card: none;
    --shadow-button: none;
    --shadow-hover: none;
  }

  .animate-bounce-in,
  .animate-bounce-out,
  .animate-bounce-gentle,
  .animate-wiggle,
  .animate-pulse-gentle,
  .animate-scale-in,
  .animate-scale-out {
    animation: none !important;
  }
}

/*
 * Component API for framework integration
 * These classes provide a stable API for component libraries
 */

/* Button API */
.ui-button {
  /* Extends btn, btn-md, btn-primary */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-semibold);
  border-radius: var(--radius-2xl);
  border: none;
  cursor: pointer;
  transition: var(--transition-all);
  text-decoration: none;
  user-select: none;
  touch-action: manipulation;
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  box-shadow: var(--shadow-button);
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-base);
  gap: var(--space-2);
  background-color: var(--color-interactive-primary);
  color: var(--color-text);
}

.ui-button:hover {
  box-shadow: var(--shadow-hover);
  transform: scale(var(--feedback-scale-hover));
  background-color: var(--color-interactive-primary-hover);
}

.ui-button:active {
  transform: scale(var(--feedback-scale-active));
}

.ui-button-secondary {
  /* Extends btn, btn-md, btn-secondary */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-semibold);
  border-radius: var(--radius-2xl);
  cursor: pointer;
  transition: var(--transition-all);
  text-decoration: none;
  user-select: none;
  touch-action: manipulation;
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  box-shadow: var(--shadow-button);
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-base);
  gap: var(--space-2);
  background-color: var(--color-surface);
  color: var(--color-text);
  border: 2px solid var(--color-border);
}

.ui-button-secondary:hover {
  box-shadow: var(--shadow-hover);
  transform: scale(var(--feedback-scale-hover));
  background-color: var(--color-surface-secondary);
  border-color: var(--color-border-secondary);
}

.ui-button-small {
  /* Extends btn, btn-sm, btn-primary */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-semibold);
  border-radius: var(--radius-2xl);
  border: none;
  cursor: pointer;
  transition: var(--transition-all);
  text-decoration: none;
  user-select: none;
  touch-action: manipulation;
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  box-shadow: var(--shadow-button);
  padding: var(--space-2) var(--space-4);
  font-size: var(--text-sm);
  gap: var(--space-1);
  background-color: var(--color-interactive-primary);
  color: var(--color-text);
}

.ui-button-large {
  /* Extends btn, btn-lg, btn-primary */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-semibold);
  border-radius: var(--radius-2xl);
  border: none;
  cursor: pointer;
  transition: var(--transition-all);
  text-decoration: none;
  user-select: none;
  touch-action: manipulation;
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  box-shadow: var(--shadow-button);
  padding: var(--space-4) var(--space-8);
  font-size: var(--text-lg);
  gap: var(--space-2);
  background-color: var(--color-interactive-primary);
  color: var(--color-text);
}

/* Card API */
.ui-card {
  /* Extends card, card-md */
  background-color: var(--color-surface);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-card);
  border: 1px solid var(--color-border);
  transition: var(--transition-all);
  padding: var(--space-6);
}

.ui-card-interactive {
  /* Extends card, card-md, card-interactive */
  background-color: var(--color-surface);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-card);
  border: 1px solid var(--color-border);
  transition: var(--transition-all);
  padding: var(--space-6);
  cursor: pointer;
}

.ui-card-interactive:hover {
  box-shadow: var(--shadow-hover);
  transform: scale(var(--feedback-scale-hover));
}

.ui-card-interactive:active {
  transform: scale(var(--feedback-scale-active));
}

/* Game Card API */
.ui-game-card {
  /* Extends game-card, card, flip-card */
  position: relative;
  aspect-ratio: var(--card-aspect-ratio);
  cursor: pointer;
  transition: var(--transition-transform);
  user-select: none;
  touch-action: manipulation;
  background-color: var(--color-surface);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-card);
  border: 1px solid var(--color-border);
  perspective: 1000px;
}

.ui-game-card-small {
  width: var(--card-size-sm);
  height: var(--card-size-sm);
}

.ui-game-card-medium {
  width: var(--card-size-md);
  height: var(--card-size-md);
}

.ui-game-card-large {
  width: var(--card-size-lg);
  height: var(--card-size-lg);
}

/* Layout API */
.ui-container {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}

.ui-grid {
  display: grid;
  gap: var(--space-4);
}

.ui-flex {
  display: flex;
  gap: var(--space-4);
}

/*
 * Framework compatibility layer
 * Provides compatibility with popular CSS frameworks
 */

/* Bootstrap-like utilities */
.container {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}

.row {
  display: flex;
  gap: var(--space-4);
  flex-wrap: wrap;
  margin-left: calc(var(--space-2) * -1);
  margin-right: calc(var(--space-2) * -1);
}

.col {
  flex: 1;
  padding-left: var(--space-2);
  padding-right: var(--space-2);
}

/* Material-like utilities */
.elevation-1 { box-shadow: var(--shadow-sm); }
.elevation-2 { box-shadow: var(--shadow-base); }
.elevation-3 { box-shadow: var(--shadow-md); }
.elevation-4 { box-shadow: var(--shadow-lg); }
.elevation-5 { box-shadow: var(--shadow-xl); }

/* Chakra-like utilities */
.chakra-button {
  /* Copy ui-button styles */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--font-semibold);
  border-radius: var(--radius-2xl);
  border: none;
  cursor: pointer;
  transition: var(--transition-all);
  text-decoration: none;
  user-select: none;
  touch-action: manipulation;
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  box-shadow: var(--shadow-button);
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-base);
  gap: var(--space-2);
  background-color: var(--color-interactive-primary);
  color: var(--color-text);
}

.chakra-card {
  /* Copy ui-card styles */
  background-color: var(--color-surface);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-card);
  border: 1px solid var(--color-border);
  transition: var(--transition-all);
  padding: var(--space-6);
}

/*
 * Debug utilities (development only)
 */
.debug-grid {
  background-image:
    linear-gradient(rgba(255, 0, 0, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 0, 0, 0.1) 1px, transparent 1px);
  background-size: 1rem 1rem;
}

.debug-outline * {
  outline: 1px solid red !important;
}

.debug-spacing * {
  background-color: rgba(255, 0, 0, 0.1) !important;
}
